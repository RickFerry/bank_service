<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_07j2xiu" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.41.0" modeler:executionPlatform="Camunda Platform" modeler:executionPlatformVersion="7.24.0">
  <bpmn:collaboration id="Client">
    <bpmn:participant id="DepositOpeningId" name="Deposit Opening" processRef="OpeningDeposit" />
    <bpmn:textAnnotation id="TextAnnotation_1dwr8fx">
      <bpmn:text>Check if client has a passport, if not throw an error since passport is required</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:textAnnotation id="TextAnnotation_1n3qubz">
      <bpmn:text>1.Create and provide list of deposits.
2.Set them to execution variable.</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:textAnnotation id="TextAnnotation_0jng4gd">
      <bpmn:text>1.Clients read the deposit list.
2.Choose the prefered deposit.</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_1mkl1zt" associationDirection="None" sourceRef="PassaportProvidingId" targetRef="TextAnnotation_1dwr8fx" />
    <bpmn:association id="Association_15rudtu" associationDirection="None" sourceRef="DepositListProvidingId" targetRef="TextAnnotation_1n3qubz" />
    <bpmn:association id="Association_1iaz4f9" associationDirection="None" sourceRef="DepositChoosingId" targetRef="TextAnnotation_0jng4gd" />
  </bpmn:collaboration>
  <bpmn:process id="OpeningDeposit" name="DepositOpening" isExecutable="true" camunda:historyTimeToLive="90">
    <bpmn:laneSet id="LaneSet_1yi3fpc">
      <bpmn:lane id="ClientId" name="Client">
        <bpmn:flowNodeRef>PassaportProvidingId</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_07lhl1y</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>DepositChoosingId</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_1k66yv9</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>ErrorPassportShouldBePresentHandleId</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>StartEvent_1</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_1uw04yg</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="BankWorkerId" name="Bank Worker">
        <bpmn:flowNodeRef>DepositListProvidingId</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:serviceTask id="PassaportProvidingId" name="Provide a passport" camunda:asyncBefore="true" camunda:delegateExpression="${passportProvidingDelegate}">
      <bpmn:incoming>Flow_1fzn7t6</bpmn:incoming>
      <bpmn:outgoing>Flow_1jiyprj</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="Event_07lhl1y">
      <bpmn:incoming>Flow_0v2kx59</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:serviceTask id="DepositListProvidingId" name="Provide list deposits" camunda:delegateExpression="${depositListProvidingDelegate}">
      <bpmn:incoming>Flow_1jiyprj</bpmn:incoming>
      <bpmn:outgoing>Flow_1sbw6nw</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:userTask id="DepositChoosingId" name="Take a look in to deposit list and choose one of them" camunda:formKey="camunda-forms:/form/select-bank-deposit.form">
      <bpmn:incoming>Flow_1sbw6nw</bpmn:incoming>
      <bpmn:outgoing>Flow_0tbjmrx</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:scriptTask id="Activity_1k66yv9" name="Deposit opening process" scriptFormat="JavaScript">
      <bpmn:incoming>Flow_0tbjmrx</bpmn:incoming>
      <bpmn:outgoing>Flow_08ema3g</bpmn:outgoing>
      <bpmn:script>print('The deposit opening process has finished');

var depositNme = execution.getVariable('depositName');

print('The choosen deposit name is: ' + depositName);</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:boundaryEvent id="ErrorPassportShouldBePresentHandleId" name="Error passport should be present handle" attachedToRef="PassaportProvidingId">
      <bpmn:outgoing>Flow_0v2kx59</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_1l6mcou" errorRef="Error_0gedzpw" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_1fzn7t6" sourceRef="StartEvent_1" targetRef="PassaportProvidingId" />
    <bpmn:sequenceFlow id="Flow_1jiyprj" sourceRef="PassaportProvidingId" targetRef="DepositListProvidingId" />
    <bpmn:sequenceFlow id="Flow_08ema3g" sourceRef="Activity_1k66yv9" targetRef="Event_1uw04yg" />
    <bpmn:sequenceFlow id="Flow_0v2kx59" sourceRef="ErrorPassportShouldBePresentHandleId" targetRef="Event_07lhl1y" />
    <bpmn:sequenceFlow id="Flow_1sbw6nw" sourceRef="DepositListProvidingId" targetRef="DepositChoosingId" />
    <bpmn:sequenceFlow id="Flow_0tbjmrx" sourceRef="DepositChoosingId" targetRef="Activity_1k66yv9" />
    <bpmn:startEvent id="StartEvent_1">
      <bpmn:outgoing>Flow_1fzn7t6</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:endEvent id="Event_1uw04yg">
      <bpmn:incoming>Flow_08ema3g</bpmn:incoming>
    </bpmn:endEvent>
  </bpmn:process>
  <bpmn:error id="Error_0gedzpw" name="SUDDEN_OPERATION_INTERRUPTION_ERROR" errorCode="SUDDEN_OPERATION_INTERRUPTION_ERROR" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Client">
      <bpmndi:BPMNShape id="Participant_1m3t5uk_di" bpmnElement="DepositOpeningId" isHorizontal="true">
        <dc:Bounds x="155" y="82" width="1345" height="938" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_1vfx0za_di" bpmnElement="BankWorkerId" isHorizontal="true">
        <dc:Bounds x="185" y="560" width="1315" height="460" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_0piipfw_di" bpmnElement="ClientId" isHorizontal="true">
        <dc:Bounds x="185" y="82" width="1315" height="478" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1f6invq_di" bpmnElement="PassaportProvidingId">
        <dc:Bounds x="300" y="280" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_07lhl1y_di" bpmnElement="Event_07lhl1y">
        <dc:Bounds x="472" y="262" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0t2y3rd_di" bpmnElement="DepositListProvidingId">
        <dc:Bounds x="300" y="800" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1gd729g_di" bpmnElement="DepositChoosingId">
        <dc:Bounds x="620" y="280" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1k66yv9_di" bpmnElement="Activity_1k66yv9">
        <dc:Bounds x="890" y="280" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="StartEvent_1_di" bpmnElement="StartEvent_1">
        <dc:Bounds x="222" y="302" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1uw04yg_di" bpmnElement="Event_1uw04yg">
        <dc:Bounds x="1102" y="302" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1geo627_di" bpmnElement="ErrorPassportShouldBePresentHandleId">
        <dc:Bounds x="382" y="262" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="356" y="220" width="88" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1fzn7t6_di" bpmnElement="Flow_1fzn7t6">
        <di:waypoint x="258" y="320" />
        <di:waypoint x="300" y="320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1jiyprj_di" bpmnElement="Flow_1jiyprj">
        <di:waypoint x="350" y="360" />
        <di:waypoint x="350" y="800" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_08ema3g_di" bpmnElement="Flow_08ema3g">
        <di:waypoint x="990" y="320" />
        <di:waypoint x="1102" y="320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0v2kx59_di" bpmnElement="Flow_0v2kx59">
        <di:waypoint x="420" y="280" />
        <di:waypoint x="470" y="280" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1sbw6nw_di" bpmnElement="Flow_1sbw6nw">
        <di:waypoint x="400" y="840" />
        <di:waypoint x="670" y="840" />
        <di:waypoint x="670" y="360" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0tbjmrx_di" bpmnElement="Flow_0tbjmrx">
        <di:waypoint x="720" y="320" />
        <di:waypoint x="890" y="320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="TextAnnotation_1dwr8fx_di" bpmnElement="TextAnnotation_1dwr8fx">
        <dc:Bounds x="220" y="150" width="99.99156545209178" height="98.51551956815115" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_1n3qubz_di" bpmnElement="TextAnnotation_1n3qubz">
        <dc:Bounds x="220" y="910" width="99.99156545209178" height="98.51551956815115" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_0jng4gd_di" bpmnElement="TextAnnotation_0jng4gd">
        <dc:Bounds x="560" y="157" width="99.99156545209178" height="83.67071524966262" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Association_1mkl1zt_di" bpmnElement="Association_1mkl1zt">
        <di:waypoint x="329" y="280" />
        <di:waypoint x="313" y="249" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Association_15rudtu_di" bpmnElement="Association_15rudtu">
        <di:waypoint x="312" y="880" />
        <di:waypoint x="284" y="910" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Association_1iaz4f9_di" bpmnElement="Association_1iaz4f9">
        <di:waypoint x="654" y="280" />
        <di:waypoint x="638" y="241" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
